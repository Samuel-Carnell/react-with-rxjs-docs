(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{365:function(e,t,s){"use strict";s.r(t);var a=s(45),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h2",{attrs:{id:"uselatestvalue"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#uselatestvalue"}},[e._v("#")]),e._v(" useLatestValue")]),e._v(" "),s("p",[e._v("Subscribes to "),s("code",[e._v("source$")]),e._v(" and returns/yields the latest emitted value, re-rendering the component when "),s("code",[e._v("source$")]),e._v(" emits a new value.")]),e._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token generic-function"}},[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("useLatestValue")]),s("span",{pre:!0,attrs:{class:"token generic class-name"}},[s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("TValue"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")])])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("source$"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" Observable"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("TValue"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" TValue "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("undefined")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token generic-function"}},[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("useLatestValue")]),s("span",{pre:!0,attrs:{class:"token generic class-name"}},[s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("TValue"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")])])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("source$"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" BehaviorSubject"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("TValue"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" TValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("p",[e._v("Like "),s("a",{attrs:{href:"/api/hooks/use-subscription"}},[e._v("useSubscription")]),e._v(" if the source observable changes in between re-renders this hook will automatically unsubscribe from the old observable and resubscribe to the new one. However, until the new observable emits a value this hook will return the last emitted value of the previous observable.")]),e._v(" "),s("p",[e._v("To make this hook concurrent mode safe the subscription is created after the component initially mounts, thus will always return "),s("code",[e._v("undefined")]),e._v(" when called on the initial render. BehaviorSubject subjects however can negate this as their values can be read synchronously (see below). You can find out more about concurrent mode safety "),s("a",{attrs:{href:"/guide/core-concepts#concurrent-mode-safety"}},[e._v("here")]),e._v(".")]),e._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[e._v("BehaviorSubjects")]),e._v(" "),s("p",[e._v("Unlike other observable, BehaviorSubjects provide a "),s("code",[e._v("getValue")]),e._v(" method for reading values synchronously. This hook utilizes this method to get the current value on the initial render, before the component has mounted and the subscription established, avoiding the need to default to "),s("code",[e._v("undefined")]),e._v(".")])]),e._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[e._v("Error Handling")]),e._v(" "),s("p",[e._v("If an error is thrown by the source observable, then it will be treated as if thrown by the component during the rendering process. Thus requiring a React error boundary to catch the error.")])]),e._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),s("p",[e._v("Internally this hook uses the "),s("code",[e._v("useState")]),e._v(" hook, as a result synchronous updates may be batched by React in order to reduce re-renders. In very rare cases this may cause unexpected results.")]),e._v(" "),s("p",[e._v("To prevent this the source observable must be modified so that the subscription creation and/or the notification delivery are performed asynchronously. This can be done by calling the "),s("code",[e._v("subscribeOn")]),e._v(" operator and/or the "),s("code",[e._v("observeOn")]),e._v(" operator with the "),s("code",[e._v("asyncScheduler")]),e._v(". You can find out more on RxJS schedulers "),s("a",{attrs:{href:"https://rxjs.dev/guide/scheduler",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),s("OutboundLink")],1),e._v(".")])])])}),[],!1,null,null,null);t.default=r.exports}}]);