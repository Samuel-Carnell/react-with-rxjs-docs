<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>useLatestValue | React with RxJS</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/react-with-rxjs-docs/assets/css/0.styles.56d02b76.css" as="style"><link rel="preload" href="/react-with-rxjs-docs/assets/js/app.69e52ff4.js" as="script"><link rel="preload" href="/react-with-rxjs-docs/assets/js/2.ae18ba25.js" as="script"><link rel="preload" href="/react-with-rxjs-docs/assets/js/12.67bb83d0.js" as="script"><link rel="prefetch" href="/react-with-rxjs-docs/assets/js/10.758137c1.js"><link rel="prefetch" href="/react-with-rxjs-docs/assets/js/11.e0be15e4.js"><link rel="prefetch" href="/react-with-rxjs-docs/assets/js/13.5422458d.js"><link rel="prefetch" href="/react-with-rxjs-docs/assets/js/14.efb209ec.js"><link rel="prefetch" href="/react-with-rxjs-docs/assets/js/15.6d8a92e8.js"><link rel="prefetch" href="/react-with-rxjs-docs/assets/js/16.5de2d06c.js"><link rel="prefetch" href="/react-with-rxjs-docs/assets/js/17.15368135.js"><link rel="prefetch" href="/react-with-rxjs-docs/assets/js/18.d3f8df4a.js"><link rel="prefetch" href="/react-with-rxjs-docs/assets/js/3.9c229156.js"><link rel="prefetch" href="/react-with-rxjs-docs/assets/js/4.e05c873c.js"><link rel="prefetch" href="/react-with-rxjs-docs/assets/js/5.f3e6ed41.js"><link rel="prefetch" href="/react-with-rxjs-docs/assets/js/6.498ab014.js"><link rel="prefetch" href="/react-with-rxjs-docs/assets/js/7.d76d9a7a.js"><link rel="prefetch" href="/react-with-rxjs-docs/assets/js/8.1bdfb343.js"><link rel="prefetch" href="/react-with-rxjs-docs/assets/js/9.d38f9916.js">
    <link rel="stylesheet" href="/react-with-rxjs-docs/assets/css/0.styles.56d02b76.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/react-with-rxjs-docs/" class="home-link router-link-active"><!----> <span class="site-name">React with RxJS</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/react-with-rxjs-docs/guide/core-concepts.html" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/react-with-rxjs-docs/api/hooks/use-observable.html" class="nav-link">
  API
</a></div><div class="nav-item"><a href="/react-with-rxjs-docs/changelog.html" class="nav-link">
  Changelog
</a></div> <a href="https://github.com/samuel-carnell/react-with-rxjs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/react-with-rxjs-docs/guide/core-concepts.html" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/react-with-rxjs-docs/api/hooks/use-observable.html" class="nav-link">
  API
</a></div><div class="nav-item"><a href="/react-with-rxjs-docs/changelog.html" class="nav-link">
  Changelog
</a></div> <a href="https://github.com/samuel-carnell/react-with-rxjs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Hooks</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-with-rxjs-docs/api/hooks/use-observable.html" class="sidebar-link">useObservable</a></li><li><a href="/react-with-rxjs-docs/api/hooks/use-is-complete.html" class="sidebar-link">useIsComplete</a></li><li><a href="/react-with-rxjs-docs/api/hooks/use-latest-value.html" aria-current="page" class="active sidebar-link">useLatestValue</a></li><li><a href="/react-with-rxjs-docs/api/hooks/use-subscription.html" class="sidebar-link">useSubscription</a></li><li><a href="/react-with-rxjs-docs/api/hooks/use-state-observable.html" class="sidebar-link">useStateObservable</a></li><li><a href="/react-with-rxjs-docs/api/hooks/use-event-observable.html" class="sidebar-link">useEventObservable</a></li><li><a href="/react-with-rxjs-docs/api/hooks/use-context-observable.html" class="sidebar-link">useContextObservable</a></li><li><a href="/react-with-rxjs-docs/api/hooks/use-observable-of.html" class="sidebar-link">useObservableOf</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="uselatestvalue"><a href="#uselatestvalue" class="header-anchor">#</a> useLatestValue</h2> <p>Subscribes to the given observable, returning the latest emitted value and re-rendering the component when it emits a new value. If the observable changes between renders this hook will unsubscribe from the previous observable and subscribe to the new observable, but will return the last emitted value from the previous observable until the new observable emits a new value.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">useLatestValue</span><span class="token generic class-name"><span class="token operator">&lt;</span>TValue<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>source$<span class="token operator">:</span> Observable<span class="token operator">&lt;</span>TValue<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> TValue <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">useLatestValue</span><span class="token generic class-name"><span class="token operator">&lt;</span>TValue<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>source$<span class="token operator">:</span> BehaviorSubject<span class="token operator">&lt;</span>TValue<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> TValue<span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Concurrent mode safety</p> <p>To make this hook concurrent mode safe the subscription is created after the component initially mounts, thus will always return <code>undefined</code> when called on the initial render. BehaviorSubject subjects however can negate this, as they provide a <code>getValue</code> method for reading their current value. You can find out more about concurrent mode safety <a href="/guide/core-concepts#concurrent-mode-safety">here</a>.</p></div> <div class="custom-block tip"><p class="custom-block-title">Error Handling</p> <p>If an error is thrown by the source observable, then it will be treated as if thrown by the component during the rendering process. Thus requiring a React error boundary to catch the error.</p></div> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Internally this hook uses the <code>useState</code> hook, as a result synchronous updates may be batched by React in order to reduce re-renders. In very rare cases this may cause unexpected results.</p> <p>To prevent this the source observable must be modified so that the subscription creation and/or the notification delivery is performed asynchronously. This can be done by calling the <code>subscribeOn</code> operator and/or the <code>observeOn</code> operator with the <code>asyncScheduler</code>. You can find out more on RxJS' schedulers <a href="https://rxjs.dev/guide/scheduler" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <h3 id="example"><a href="#example" class="header-anchor">#</a> Example</h3> <p>Example counter code with <a href="/api/hooks/use-state-observable">useStateObservable</a>.</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">// Create an observable of the current value and a function to update it</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>count$<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useStateObservable</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Yield the latest emitted value from count</span>
<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">useLatestValue</span><span class="token punctuation">(</span>count$<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">The current count is </span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/react-with-rxjs-docs/assets/js/app.69e52ff4.js" defer></script><script src="/react-with-rxjs-docs/assets/js/2.ae18ba25.js" defer></script><script src="/react-with-rxjs-docs/assets/js/12.67bb83d0.js" defer></script>
  </body>
</html>
